<% my_total = Current.user.get_balance_in_group @group %>
<% is_positive = my_total >= 0 %>

<div class="card balance-hero <%= is_positive ? 'positive' : 'negative' %>">
  <p class="text-muted text-sm">Votre Balance</p>

  <div class="font-mono balance-amount <%= is_positive ? 'text-success' : 'text-danger' %>">
    <%= is_positive ? "+" : "" %><%= number_to_currency(my_total, unit: "€", format: "%n %u") %>
  </div>

  <%= link_to calculator_group_path, class: "flex items-center justify-center gap-1 text-sm text-muted" do %>
    <span>Voir qui doit quoi &rarr;</span>
  <% end %>
</div>

<div class="flex gap-2 balance-scroll-container">
  <% @group.users.where.not(id: Current.user.id).each do |user| %>
    <% total = user.get_balance_in_group @group %>
    <div class="card balance-mini-card">
      <p class="text-sm font-bold mb-2"><%= user.username %></p>
      <p class="font-mono text-sm <%= total > 0 ? 'text-success' : (total < 0 ? 'text-danger' : 'text-muted') %>">
        <%= total > 0 ? "+" : "" %><%= total.round(2) %> €
      </p>
    </div>
  <% end %>
</div>