<% page_header("Remboursements", "Comment équilibrer les comptes") %>

<div class="flex flex-col gap-4">
  <% @trace.each_with_index do |step, n| %>
    <div class="card">
      <h3 class="text-primary">Étape <%= n + 1 %></h3>

      <div class="algo-step-list">
        <ul class="text-sm">
          <% step.each_pair do |user, total| %>
            <li class="flex justify-between items-center mb-2">
              <span><%= user.username %></span>
              <span class="font-mono <%= total > 0 ? 'text-success' : (total < 0 ? 'text-danger' : 'text-muted') %>">
                <%= total > 0 ? "+" : "" %><%= total %> €
              </span>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="flex items-center gap-2 mt-4">
        <h4 style="margin: 0;">-> <%= @steps[n] %></h4>
      </div>
    </div>
  <% end %>
</div>

<% page_footer group_path @group %>